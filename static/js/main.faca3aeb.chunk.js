(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{103:function(t,e,n){},104:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(23),u=n.n(a),o=n(11),i=n(20),s=n(67),l=n(47),b=n(48),f=n(51),g=n(49),d=n(5),m=n(9),h=n(43),O=n.n(h),j="/",p="/contacts",E="/login",v="/register",C=function(t){var e=t.isAuthenticated;return c.a.createElement("nav",null,e&&c.a.createElement(i.b,{to:p,exact:!0,className:O.a.link,activeClassName:O.a.activeLink},"Phonebook"))},k=Object(o.b)((function(t){return{isAuthenticated:m.c.getIsAuthenticated(t)}}))(C),S=n(119),U=n(46),_=n.n(U),A=function(t){var e=t.name,n=t.onLogout;return c.a.createElement("div",{className:_.a.container},c.a.createElement("span",{className:_.a.name},e," "),c.a.createElement(S.a,{type:"button",onClick:n,variant:"contained",color:"primary"},"Logout"))},y={onLogout:m.a.logOut},L=Object(o.b)((function(t){return{name:m.c.getUsername(t)}}),y)(A),R=n(33),q=n.n(R),N=function(){return c.a.createElement("div",null,c.a.createElement(i.b,{to:v,exact:!0,className:q.a.link,activeClassName:q.a.activeLink},"Registartion"),c.a.createElement(i.b,{to:E,exact:!0,className:q.a.link,activeClassName:q.a.activeLink},"Login"))},x=n(68),w=n.n(x),T=function(t){var e=t.isAuthenticated;return c.a.createElement("header",{className:w.a.header},c.a.createElement(k,null),e?c.a.createElement(L,null):c.a.createElement(N,null))},z=Object(o.b)((function(t){return{isAuthenticated:m.c.getIsAuthenticated(t)}}))(T),I=n(65),J=n(36),M=Object(o.b)((function(t){return{isAuthenticated:m.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,a=Object(J.a)(t,["component","isAuthenticated","redirectTo"]);return c.a.createElement(d.b,Object.assign({},a,{render:function(t){return n?c.a.createElement(e,t):c.a.createElement(d.a,{to:r})}}))})),B=Object(o.b)((function(t){return{isAuthenticated:m.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,a=Object(J.a)(t,["component","isAuthenticated","redirectTo"]);return c.a.createElement(d.b,Object.assign({},a,{render:function(t){return n&&a.restricted?c.a.createElement(d.a,{to:r}):c.a.createElement(e,t)}}))})),P=Object(r.lazy)((function(){return n.e(1).then(n.bind(null,182))})),G=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(8),n.e(4)]).then(n.bind(null,179))})),F=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,180))})),D=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,181))})),V=function(t){Object(f.a)(n,t);var e=Object(g.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurretnUser()}},{key:"render",value:function(){return c.a.createElement(I.a,null,c.a.createElement(z,null),c.a.createElement(r.Suspense,{fallback:c.a.createElement("p",null,"Loading...")},c.a.createElement(d.d,null,c.a.createElement(d.b,{exact:!0,path:j,component:P}),c.a.createElement(B,{path:v,restricted:!0,redirectTo:p,component:F}),c.a.createElement(B,{path:E,restricted:!0,redirectTo:p,component:D}),c.a.createElement(M,{path:p,redirectTo:E,component:G}))))}}]),n}(r.Component),H={onGetCurretnUser:m.a.getCurrentUser},K=Object(o.b)(null,H)(V),Q=n(39),W=n(2),X=n(22),Y=n(70),Z=n.n(Y),$=n(50),tt=Object(Q.a)(Object(W.d)({serializableCheck:{ignoredActions:[X.a,X.f,X.b,X.c,X.d,X.e]}})),et={key:"auth",storage:Z.a,whitelist:["token"]},nt=Object(W.a)({reducer:{auth:Object(X.g)(et,m.b),contacts:$.c},middleware:tt,devTools:!1}),rt={store:nt,persistor:Object(X.h)(nt)};n(102),n(103);u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(o.a,{store:rt.store},c.a.createElement(s.a,{loading:null,persistor:rt.persistor},c.a.createElement(i.a,null,c.a.createElement(K,null))))),document.getElementById("root"))},33:function(t,e,n){t.exports={link:"AuthNav_link__1JJ5t",activeLink:"AuthNav_activeLink__2sqTx"}},43:function(t,e,n){t.exports={link:"Navigation_link__E38-9",activeLink:"Navigation_activeLink__1-LUM"}},46:function(t,e,n){t.exports={container:"UserMenu_container__868co",name:"UserMenu_name__2hBJw"}},50:function(t,e,n){"use strict";n.d(e,"b",(function(){return j})),n.d(e,"d",(function(){return C})),n.d(e,"a",(function(){return O})),n.d(e,"c",(function(){return R}));var r,c,a=n(16),u=n.n(a),o=n(2),i=Object(o.b)("contacts/fetchContactsRequest"),s=Object(o.b)("contacts/fetchContactsSucces"),l=Object(o.b)("contacts/fetchContactsError"),b=Object(o.b)("contacts/addContactsRequest"),f=Object(o.b)("contacts/addContactsSucces"),g=Object(o.b)("contacts/addContactsError"),d=Object(o.b)("contacts/deleteContactsRequest"),m=Object(o.b)("contacts/deleteContactsSucces"),h=Object(o.b)("contacts/deleteContactsError"),O=Object(o.b)("contacts/changeFilter"),j={addContact:function(t){var e=t.name,n=t.number;return function(t){var r={name:e,number:n};t(b()),u.a.post("/contacts",r).then((function(e){var n=e.data;return t(f(n))})).catch((function(e){return t(g(e.message))}))}},deleteContact:function(t){return function(e){e(d()),u.a.delete("/contacts/".concat(t)).then((function(){return e(m(t))})).catch((function(t){return e(h(t.message))}))}},fetchContacts:function(){return function(t){t(i()),u.a.get("/contacts").then((function(e){var n=e.data;return t(s(n))})).catch((function(e){return t(l(e.message))}))}}},p=n(19),E=function(t){return t.contacts.filter},v=function(t){return t.contacts.items},C={getLoading:function(t){return t.contacts.loading},getFilter:E,getVisibleContacts:Object(p.a)([v,E],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))})),getExistingContactsName:Object(p.a)([v],(function(t){if(t.length>=0)return t.map((function(t){return t.name.toLowerCase()}))}))},k=n(3),S=n(39),U=n(7),_=Object(o.c)([],(r={},Object(k.a)(r,s,(function(t,e){return e.payload})),Object(k.a)(r,f,(function(t,e){var n=e.payload;return[].concat(Object(S.a)(t),[n])})),Object(k.a)(r,m,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),A=Object(o.c)("",Object(k.a)({},O,(function(t,e){return e.payload}))),y=Object(o.c)(!1,(c={},Object(k.a)(c,b,(function(){return!0})),Object(k.a)(c,f,(function(){return!1})),Object(k.a)(c,g,(function(){return!1})),Object(k.a)(c,d,(function(){return!0})),Object(k.a)(c,m,(function(){return!1})),Object(k.a)(c,h,(function(){return!1})),Object(k.a)(c,i,(function(){return!0})),Object(k.a)(c,s,(function(){return!1})),Object(k.a)(c,l,(function(){return!1})),c)),L=Object(o.c)(null,{}),R=Object(U.c)({items:_,filter:A,loading:y,error:L})},65:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0),c=n.n(r),a=n(69),u=n.n(a),o=function(t){var e=t.children;return c.a.createElement("div",{className:u.a.Container},e)}},68:function(t,e,n){t.exports={header:"AppBar_header__3UU_E"}},69:function(t,e,n){t.exports={Container:"Container_Container__3kpiG"}},73:function(t,e,n){t.exports=n(104)},9:function(t,e,n){"use strict";n.d(e,"b",(function(){return k})),n.d(e,"a",(function(){return y})),n.d(e,"c",(function(){return L}));var r,c,a,u,o=n(2),i=Object(o.b)("auth/registerRequest"),s=Object(o.b)("auth/registerSuccess"),l=Object(o.b)("auth/registerError"),b=Object(o.b)("auth/loginRequest"),f=Object(o.b)("auth/loginSuccess"),g=Object(o.b)("auth/loginError"),d={registerRequest:i,registerSuccess:s,registerError:l,logoutRequest:Object(o.b)("auth/logoutRequest"),logoutSuccess:Object(o.b)("auth/logoutSuccess"),logoutError:Object(o.b)("auth/logoutError"),loginRequest:b,loginSuccess:f,loginError:g,getCurrentUserRequest:Object(o.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(o.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(o.b)("auth/getCurrentUserError")},m=n(3),h=n(7),O={name:null,email:null},j=Object(o.c)(O,(r={},Object(m.a)(r,d.registerSuccess,(function(t,e){return e.payload.user})),Object(m.a)(r,d.loginSuccess,(function(t,e){return e.payload.user})),Object(m.a)(r,d.logoutSuccess,(function(){return O})),Object(m.a)(r,d.getCurrentUserSuccess,(function(t,e){return e.payload})),r)),p=Object(o.c)(null,(c={},Object(m.a)(c,d.registerSuccess,(function(t,e){return e.payload.token})),Object(m.a)(c,d.loginSuccess,(function(t,e){return e.payload.token})),Object(m.a)(c,d.logoutSuccess,(function(){return null})),c)),E=function(t,e){return e.payload},v=Object(o.c)(null,(a={},Object(m.a)(a,d.registerError,E),Object(m.a)(a,d.loginError,E),Object(m.a)(a,d.logoutError,E),Object(m.a)(a,d.getCurrentUserError,E),a)),C=Object(o.c)(!1,(u={},Object(m.a)(u,d.registerSuccess,(function(){return!0})),Object(m.a)(u,d.loginSuccess,(function(){return!0})),Object(m.a)(u,d.getCurrentUserSuccess,(function(){return!0})),Object(m.a)(u,d.registerError,(function(){return!1})),Object(m.a)(u,d.loginError,(function(){return!1})),Object(m.a)(u,d.getCurrentUserError,(function(){return!1})),Object(m.a)(u,d.logoutSuccess,(function(){return!1})),u)),k=Object(h.c)({user:j,isAuthenticated:C,token:p,error:v}),S=n(16),U=n.n(S);U.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var _=function(t){U.a.defaults.headers.common.Authorization="Bearer ".concat(t)},A=function(){U.a.defaults.headers.common.Authorization=""},y={register:function(t){return function(e){e(d.registerRequest()),U.a.post("/users/signup",t).then((function(t){var n=t.data;return e(d.registerSuccess(n),_(n.token))})).catch((function(t){return e(d.registerError(t.message))}))}},logIn:function(t){return function(e){e(d.loginRequest()),U.a.post("/users/login",t).then((function(t){var n=t.data;return e(d.loginSuccess(n),_(n.token))})).catch((function(t){return e(d.loginError(t.message))}))}},logOut:function(){return function(t){t(d.logoutRequest()),U.a.post("/users/logout").then(t(d.logoutSuccess()),A()).catch((function(e){return t(d.logoutError(e.message))}))}},getCurrentUser:function(){return function(t,e){var n=e().auth.token;n&&(_(n),t(d.getCurrentUserRequest()),U.a.get("/users/current").then((function(e){var n=e.data;return t(d.getCurrentUserSuccess(n))})).catch((function(e){return t(d.getCurrentUserError(e.message))})))}}},L={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUsername:function(t){return t.auth.user.name}}}},[[73,6,7]]]);
//# sourceMappingURL=main.faca3aeb.chunk.js.map